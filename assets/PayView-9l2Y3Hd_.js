import{a as _,S as i}from"./sweetalert2.all-j9gesYv3.js";import{_ as y,a as w,c as a,b as e,F as n,g as p,d as c,w as k,r as m,o as r,t as l,n as x}from"./index-vVl8uK9N.js";import{c as L}from"./cartStore-YTVCGzPp.js";/* empty css              */var T={VITE_URL:"https://ec-course-api.hexschool.io/v2",VITE_PATH:"junapi",BASE_URL:"/Aromatherapy-project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:f,VITE_PATH:g}=T,O={data(){return{order:[],form:{is_paid:!1},checked:""}},methods:{getOrder(){const t=`${f}/api/${g}/order/${this.orderId}`;_.get(t).then(o=>{this.order=o.data.order.products,console.log(this.order)}).catch(o=>{i.fire(o.response.data.message)})},ischeckNum(t){return/^[0-9]{3}$/.test(t)?!0:"請輸入正確的檢查碼"},...w(L,["getCart"]),payOrder(){const t=`${f}/api/${g}/pay/${this.orderId}`;console.log("payOrder",t),_.post(t).then(()=>{this.getOrder(),this.getCart(),i.fire("付款成功"),this.$router.push("/checkoutSuccess")}).catch(o=>{i.fire(o.response.data.message)})}},created(){this.orderId=this.$route.params.orderId,this.getOrder(),this.checked=localStorage.getItem("payment")}},E={class:"container pt-7"},N=e("div",{class:"row justify-content-center"},[e("div",{class:"col-md-10"},[e("h3",{class:"fw-bold mb-4 pt-3"},"付款")])],-1),V={class:"row flex-row-reverse justify-content-center pb-5"},$={class:"col-md-4"},S={class:"border p-4 mb-4"},I=["src"],j={class:"w-100"},A={class:"d-flex justify-content-between"},C={class:"mb-0 fw-bold"},F={class:"mb-0"},P={class:"mb-0 fw-bold"},R=e("th",{scope:"row",class:"border-0 px-0 pt-4 font-weight-normal"}," 小計 ",-1),B={class:"text-end border-0 px-0 pt-4"},D=e("th",{scope:"row",class:"border-0 px-0 pt-4 font-weight-normal"}," 折扣 ",-1),U={class:"text-end border-0 px-0 pt-4"},q=e("th",{scope:"row",class:"border-0 px-0 pt-0 pb-4 font-weight-normal"}," 支付方式 ",-1),H={class:"text-end border-0 px-0 pt-0 pb-4"},M=e("p",{class:"mb-0 h4 fw-bold"},"結帳金額",-1),z={class:"mb-0 h4 fw-bold"},W={class:"col-md-6"},G={class:"accordion",id:"accordionExample"},J={class:"card rounded-0"},K=e("div",{class:"card-header bg-white border-0 py-3",id:"headingOne","data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne"},[e("p",{class:"mb-0 position-relative custom-checkout-label"}," 信用卡付款 ")],-1),Q={id:"collapseOne",class:"collapse show","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample"},X={class:"card-body bg-light ps-5 py-4"},Y={class:"mb-2"},Z=e("label",{for:"Lorem ipsum1",class:"text-muted mb-0"},"信用卡號",-1),ee={class:"mb-0"},se=e("label",{for:"Lorem ipsum2",class:"text-muted mb-0"},"檢查碼",-1),te=e("div",{class:"card rounded-0"},[e("div",{class:"card-header bg-white border-0 py-3 collapsed",id:"headingTwo","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-expanded":"true","aria-controls":"collapseTwo"},[e("p",{class:"mb-0 position-relative custom-checkout-label"}," WebATM ")]),e("div",{id:"collapseTwo",class:"collapse","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample"},[e("div",{class:"card-body bg-light ps-5 py-4"},[e("div",{class:"mb-2"},[e("label",{for:"Lorem ipsum1",class:"text-muted mb-0"},"Lorem ipsum"),e("input",{type:"text",class:"form-control",id:"Lorem ipsum1",placeholder:"Lorem ipsum"})]),e("div",{class:"mb-0"},[e("label",{for:"Lorem ipsum2",class:"text-muted mb-0"},"ApplePay"),e("input",{type:"text",class:"form-control",id:"Lorem ipsum2",placeholder:"Lorem ipsum"})])])])],-1),oe=e("div",{class:"card rounded-0"},[e("div",{class:"card-header bg-white border-0 py-3 collapsed",id:"headingThree","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-expanded":"true","aria-controls":"collapseThree"},[e("p",{class:"mb-0 position-relative custom-checkout-label"}," ApplePay ")]),e("div",{id:"collapseThree",class:"collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample"},[e("div",{class:"card-body bg-light ps-5 py-4"},[e("div",{class:"mb-2"},[e("label",{for:"Lorem ipsum1",class:"text-muted mb-0"},"Lorem ipsum"),e("input",{type:"text",class:"form-control",id:"Lorem ipsum1",placeholder:"Lorem ipsum"})]),e("div",{class:"mb-0"},[e("label",{for:"Lorem ipsum2",class:"text-muted mb-0"},"Lorem ipsum"),e("input",{type:"text",class:"form-control",id:"Lorem ipsum2",placeholder:"Lorem ipsum"})])])])],-1),ae=e("div",{class:"d-flex flex-column-reverse flex-md-row mt-4 justify-content-between align-items-md-center align-items-end w-100"},[e("button",{type:"submit",class:"btn btn-dark py-3 px-7 border-0",style:{"background-color":"#7fa185"}}," 確認付款 ")],-1);function re(t,o,le,ce,d,h){const u=m("VField"),b=m("error-message"),v=m("VForm");return r(),a("div",E,[N,e("div",V,[e("div",$,[e("div",S,[(r(!0),a(n,null,p(d.order,s=>(r(),a("div",{class:"d-flex",key:s.id},[e("img",{src:s.product.imageUrl,alt:"商品圖片",class:"me-2",style:{width:"48px",height:"48px","object-fit":"cover"}},null,8,I),e("div",j,[e("div",A,[e("p",C,l(s.product.title),1),e("p",F,"NT$"+l(s.total),1)]),e("p",P,"x"+l(s.qty),1)])]))),128)),(r(!0),a(n,null,p(d.order,s=>(r(),a("table",{class:"table mt-4 border-top border-bottom text-muted",key:s.id},[e("tbody",null,[e("tr",null,[R,e("td",B,"NT$"+l(s.total),1)]),e("tr",null,[D,e("td",U," NT$"+l(s.final_total-s.total),1)]),e("tr",null,[q,e("td",H,l(this.checked),1)])])]))),128)),(r(!0),a(n,null,p(d.order,s=>(r(),a("div",{class:"d-flex justify-content-between mt-4",key:s.id},[M,e("p",z,"NT$"+l(s.final_total),1)]))),128))])]),e("div",W,[c(v,{ref:"form",onSubmit:h.payOrder},{default:k(({errors:s})=>[e("div",G,[e("div",J,[K,e("div",Q,[e("div",X,[e("div",Y,[Z,c(u,{type:"text",class:x(["form-control",{"is-invalid":s.信用卡號}]),id:"creditCardNum",name:"信用卡號",placeholder:"xxxx xxxx xxxx xxxx",rules:"required|credit_card"},null,8,["class"]),c(b,{name:"信用卡號",class:"invalid-feedback"})]),e("div",ee,[se,c(u,{type:"text",class:x(["form-control",{"is-invalid":s.檢查碼}]),id:"checkNum",placeholder:"xxx",rules:h.ischeckNum,name:"檢查碼"},null,8,["rules","class"]),c(b,{name:"檢查碼",class:"invalid-feedback"})])])])]),te,oe]),ae]),_:1},8,["onSubmit"])])])])}const me=y(O,[["render",re]]);export{me as default};
