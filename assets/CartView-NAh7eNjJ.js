import{a as l}from"./axios-L6U4YIEh.js";import{S as T}from"./sweetalert2.all-7pLa5uUz.js";import{P as N,N as S,S as $,a as E}from"./pagination-Xjgh3_4b.js";import{_ as R,c as i,b as t,F as w,aV as v,J as P,bC as x,bs as C,t as c,d as m,w as h,r as g,o as n,e as f,I as U}from"./index-2gzOPHIY.js";import"./_commonjsHelpers-1J56E-h6.js";var q={VITE_URL:"https://ec-course-api.hexschool.io/v2",VITE_PATH:"junapi",BASE_URL:"/Aromatherapy-project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:_,VITE_PATH:p}=q,I={data(){return{products:[],carts:{},coupon_code:""}},setup(){return{modules:[N,S]}},methods:{getCart(){const e=`${_}/api/${p}/cart`;l.get(e).then(s=>{console.log(s),this.carts=s.data.data}).catch(s=>{alert(s.message)})},changeCartQty(e,s=1){const a={product_id:e.product_id,qty:s},b=`${_}/api/${p}/cart/${e.id}`;l.put(b,{data:a}).then(()=>{this.getCart()}).catch(d=>{alert(d.message)})},removeCartItem(e){const s=`${_}/api/${p}/cart/${e}`;l.delete(s).then(()=>{this.getCart()}).catch(a=>{alert(a.message)})},addCouponCode(){const e=`${_}/api/${p}/coupon`;console.log(e);const s={code:this.coupon_code};l.post(e,{data:s}).then(a=>{console.log(a),T.fire(a.data.message),this.getCart()}).catch(a=>{alert(a.data.message)})},getProducts(){const e=`${_}/api/${p}/products`;console.log(e),l.get(e).then(s=>{console.log(s),this.products=s.data.products}).catch(s=>{alert(s.data.message)})}},mounted(){this.getProducts(),this.getCart()},components:{Swiper:$,SwiperSlide:E}},B={class:"container pt-7"},L={class:"mt-3"},A=t("h3",{class:"mt-3 mb-4"},"購物車",-1),D={class:"row"},j={class:"col-md-8"},F={class:"table"},Q=t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"border-0 ps-0"},"品項"),t("th",{scope:"col",class:"border-0"},"數量"),t("th",{scope:"col",class:"border-0"},"金額"),t("th",{scope:"col",class:"border-0"})])],-1),H={key:0},M={scope:"row",class:"border-0 px-0 font-weight-normal py-4 d-flex align-items-center"},O=["src"],J={class:"mb-0 fw-bold ms-3"},z={class:"border-0 align-middle",style:{"max-width":"160px"}},G={class:"input-group pe-5"},K={class:"input-group-prepend"},W=["onClick","disabled"],X=t("i",{class:"fas fa-minus"},null,-1),Y=["onUpdate:modelValue"],Z={class:"input-group-append"},tt=["onClick"],ot=t("i",{class:"fas fa-plus"},null,-1),st={class:"border-0 align-middle"},et={class:"mb-0 ms-auto"},dt={class:"border-0 align-middle"},at=["onClick"],ct=t("i",{class:"fas fa-times"},null,-1),nt={class:"input-group w-50 mb-3"},rt={class:"input-group-append"},lt=t("i",{class:"bi bi-send-fill"},null,-1),it=[lt],_t={class:"col-md-4"},pt={class:"border p-4 mb-4"},ut=t("h4",{class:"fw-bold mb-4"},"訂單明細",-1),ht={class:"table text-muted border-bottom"},bt=t("th",{scope:"row",class:"border-0 px-0 pt-4 font-weight-normal"},"訂單金額",-1),mt={class:"text-end border-0 px-0 pt-4"},gt=t("th",{scope:"row",class:"border-0 px-0 pt-0 pb-4 font-weight-normal"}," 折扣",-1),ft={class:"text-end border-0 px-0 pt-0 pb-4"},yt={class:"d-flex justify-content-between mt-4"},wt=t("p",{class:"mb-0 h4 fw-bold"},"總額",-1),vt={class:"mb-0 h4 fw-bold"},xt={class:"my-5"},Ct=t("h3",{class:"fw-bold"},"其他商品",-1),kt={class:"swiper-container mt-4 mb-5"},Vt={class:"swiper-wrapper"},Tt={class:"swiper-slide"},Nt={class:"card border-0 mb-4 position-relative position-relative"},St=["src"],$t=t("a",{href:"#",class:"text-dark"},null,-1),Et={class:"card-body p-0"},Rt={class:"mb-0 mt-3 fw-bold",style:{color:"#4e342e"}},Pt={class:"card-text mb-0 text-primary-emphasis"},Ut={class:"text-muted"},qt={class:"text-muted"};function It(e,s,a,b,d,r){const y=g("RouterLink"),k=g("swiper-slide"),V=g("swiper");return n(),i("div",B,[t("div",L,[A,t("div",D,[t("div",j,[t("table",F,[Q,d.carts.carts?(n(),i("tbody",H,[(n(!0),i(w,null,v(d.carts.carts,o=>(n(),i("tr",{class:"border-bottom border-top",key:o.id},[t("th",M,[t("img",{src:o.product.imageUrl,alt:"",style:{width:"72px",height:"72px","object-fit":"cover"}},null,8,O),t("p",J,c(o.product.title),1)]),t("td",z,[t("div",G,[t("div",K,[t("button",{class:"btn btn-outline-dark border-0 py-2",type:"button",id:"button-addon1",onClick:u=>{o.qty--,r.changeCartQty(o,o.qty)},disabled:o.qty===1},[f("- "),X],8,W)]),x(t("input",{type:"number",class:"form-control border-0 text-center my-auto shadow-none",placeholder:"","aria-label":"Example text with button addon","aria-describedby":"button-addon1",min:"1","onUpdate:modelValue":u=>o.qty=u,readonly:""},null,8,Y),[[C,o.qty]]),t("div",Z,[t("button",{class:"btn btn-outline-dark border-0 py-2",type:"button",id:"button-addon2",onClick:u=>{o.qty++,r.changeCartQty(o,o.qty)}},[f("+ "),ot],8,tt)])])]),t("td",st,[t("p",et," NT$"+c(o.total),1)]),t("td",dt,[t("button",{class:"btn btn-outline-dark border-0 py-2",type:"button",id:"button-addon1",onClick:u=>r.removeCartItem(o.id)},"x ",8,at),ct])]))),128))])):P("",!0)]),t("div",nt,[x(t("input",{type:"text",class:"form-control rounded-0 border-bottom border-top-0 border-start-0 border-end-0 shadow-none",placeholder:"優惠碼","aria-label":"Recipient's username","aria-describedby":"button-addon2","onUpdate:modelValue":s[0]||(s[0]=o=>d.coupon_code=o)},null,512),[[C,d.coupon_code]]),t("div",rt,[t("button",{class:"btn btn-outline-dark border-bottom border-top-0 border-start-0 border-end-0 rounded-0",type:"button",id:"button-addon2",onClick:s[1]||(s[1]=(...o)=>r.addCouponCode&&r.addCouponCode(...o))},it)])])]),t("div",_t,[t("div",pt,[ut,t("table",ht,[t("tbody",null,[t("tr",null,[bt,t("td",mt,"NT$"+c(d.carts.total),1)]),t("tr",null,[gt,t("td",ft,c(d.carts.final_total-d.carts.total),1)])])]),t("div",yt,[wt,t("p",vt,"NT$"+c(d.carts.final_total),1)]),m(y,{class:"btn btn-dark w-100 mt-4",to:"/checkout",style:{"background-color":"#7FA185"}},{default:h(()=>[f(" 去買單")]),_:1})])])]),t("div",xt,[Ct,t("div",kt,[t("div",Vt,[m(V,{ref:"{swiperRef}",slidesPerView:3,centeredSlides:!0,spaceBetween:30,pagination:{type:"fraction"},navigation:!0,modules:b.modules},{default:h(()=>[(n(!0),i(w,null,v(d.products,o=>(n(),U(k,{key:o.id},{default:h(()=>[t("div",Tt,[t("div",Nt,[m(y,{class:"text-decoration-none",to:`/product/${o.id}`},{default:h(()=>[t("img",{src:o.imageUrl,class:"card-img-top rounded-0"},null,8,St),$t,t("div",Et,[t("h4",Rt,c(o.title),1),t("p",Pt,"NT$"+c(o.price),1),t("p",Ut,[t("span",qt,[t("del",null,"NT$"+c(o.origin_price),1)])])])]),_:2},1032,["to"])])])]),_:2},1024))),128))]),_:1},8,["modules"])])])])])])}const Ft=R(I,[["render",It]]);export{Ft as default};
