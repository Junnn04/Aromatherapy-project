import{a as X,S as F}from"./sweetalert2.all-UHgEhJL2.js";import{l as ne}from"./index-etBp_Pge.js";/* empty css              */import{_ as le,m as Y,a as te,c as A,d as z,b as o,F as J,g as se,i as ae,k as oe,t as C,w as R,r as j,o as L,e as G,h as ce}from"./index-Ejn4ikI0.js";import{c as I}from"./cartStore-pLsRKsRF.js";import{g as de,m as p,c as S,b as pe,d as Q,e as re,n as ue,f as fe,h as be,N as me,P as ge,S as he,a as _e}from"./pagination-bhapiAqL.js";import"./vue.runtime.esm-bundler-Azj-LjF3.js";function ve(g){let{swiper:e,extendParams:_,on:d,emit:c}=g;const m=de();let y=!1,h=null,E=null,v,i,u,w;_({scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag",scrollbarDisabledClass:"swiper-scrollbar-disabled",horizontalClass:"swiper-scrollbar-horizontal",verticalClass:"swiper-scrollbar-vertical"}}),e.scrollbar={el:null,dragEl:null};function D(){if(!e.params.scrollbar.el||!e.scrollbar.el)return;const{scrollbar:r,rtlTranslate:t}=e,{dragEl:s,el:a}=r,n=e.params.scrollbar,b=e.params.loop?e.progressLoop:e.progress;let f=i,l=(u-i)*b;t?(l=-l,l>0?(f=i-l,l=0):-l+i>u&&(f=u+l)):l<0?(f=i+l,l=0):l+i>u&&(f=u-l),e.isHorizontal()?(s.style.transform=`translate3d(${l}px, 0, 0)`,s.style.width=`${f}px`):(s.style.transform=`translate3d(0px, ${l}px, 0)`,s.style.height=`${f}px`),n.hide&&(clearTimeout(h),a.style.opacity=1,h=setTimeout(()=>{a.style.opacity=0,a.style.transitionDuration="400ms"},1e3))}function K(r){!e.params.scrollbar.el||!e.scrollbar.el||(e.scrollbar.dragEl.style.transitionDuration=`${r}ms`)}function k(){if(!e.params.scrollbar.el||!e.scrollbar.el)return;const{scrollbar:r}=e,{dragEl:t,el:s}=r;t.style.width="",t.style.height="",u=e.isHorizontal()?s.offsetWidth:s.offsetHeight,w=e.size/(e.virtualSize+e.params.slidesOffsetBefore-(e.params.centeredSlides?e.snapGrid[0]:0)),e.params.scrollbar.dragSize==="auto"?i=u*w:i=parseInt(e.params.scrollbar.dragSize,10),e.isHorizontal()?t.style.width=`${i}px`:t.style.height=`${i}px`,w>=1?s.style.display="none":s.style.display="",e.params.scrollbar.hide&&(s.style.opacity=0),e.params.watchOverflow&&e.enabled&&r.el.classList[e.isLocked?"add":"remove"](e.params.scrollbar.lockClass)}function P(r){return e.isHorizontal()?r.clientX:r.clientY}function x(r){const{scrollbar:t,rtlTranslate:s}=e,{el:a}=t;let n;n=(P(r)-fe(a)[e.isHorizontal()?"left":"top"]-(v!==null?v:i/2))/(u-i),n=Math.max(Math.min(n,1),0),s&&(n=1-n);const b=e.minTranslate()+(e.maxTranslate()-e.minTranslate())*n;e.updateProgress(b),e.setTranslate(b),e.updateActiveIndex(),e.updateSlidesClasses()}function W(r){const t=e.params.scrollbar,{scrollbar:s,wrapperEl:a}=e,{el:n,dragEl:b}=s;y=!0,v=r.target===b?P(r)-r.target.getBoundingClientRect()[e.isHorizontal()?"left":"top"]:null,r.preventDefault(),r.stopPropagation(),a.style.transitionDuration="100ms",b.style.transitionDuration="100ms",x(r),clearTimeout(E),n.style.transitionDuration="0ms",t.hide&&(n.style.opacity=1),e.params.cssMode&&(e.wrapperEl.style["scroll-snap-type"]="none"),c("scrollbarDragStart",r)}function N(r){const{scrollbar:t,wrapperEl:s}=e,{el:a,dragEl:n}=t;y&&(r.preventDefault?r.preventDefault():r.returnValue=!1,x(r),s.style.transitionDuration="0ms",a.style.transitionDuration="0ms",n.style.transitionDuration="0ms",c("scrollbarDragMove",r))}function B(r){const t=e.params.scrollbar,{scrollbar:s,wrapperEl:a}=e,{el:n}=s;y&&(y=!1,e.params.cssMode&&(e.wrapperEl.style["scroll-snap-type"]="",a.style.transitionDuration=""),t.hide&&(clearTimeout(E),E=ue(()=>{n.style.opacity=0,n.style.transitionDuration="400ms"},1e3)),c("scrollbarDragEnd",r),t.snapOnRelease&&e.slideToClosest())}function $(r){const{scrollbar:t,params:s}=e,a=t.el;if(!a)return;const n=a,b=s.passiveListeners?{passive:!1,capture:!1}:!1,f=s.passiveListeners?{passive:!0,capture:!1}:!1;if(!n)return;const l=r==="on"?"addEventListener":"removeEventListener";n[l]("pointerdown",W,b),m[l]("pointermove",N,b),m[l]("pointerup",B,f)}function q(){!e.params.scrollbar.el||!e.scrollbar.el||$("on")}function H(){!e.params.scrollbar.el||!e.scrollbar.el||$("off")}function T(){const{scrollbar:r,el:t}=e;e.params.scrollbar=pe(e,e.originalParams.scrollbar,e.params.scrollbar,{el:"swiper-scrollbar"});const s=e.params.scrollbar;if(!s.el)return;let a;if(typeof s.el=="string"&&e.isElement&&(a=e.el.querySelector(s.el)),!a&&typeof s.el=="string"){if(a=m.querySelectorAll(s.el),!a.length)return}else a||(a=s.el);e.params.uniqueNavElements&&typeof s.el=="string"&&a.length>1&&t.querySelectorAll(s.el).length===1&&(a=t.querySelector(s.el)),a.length>0&&(a=a[0]),a.classList.add(e.isHorizontal()?s.horizontalClass:s.verticalClass);let n;a&&(n=a.querySelector(Q(e.params.scrollbar.dragClass)),n||(n=re("div",e.params.scrollbar.dragClass),a.append(n))),Object.assign(r,{el:a,dragEl:n}),s.draggable&&q(),a&&a.classList[e.enabled?"remove":"add"](...S(e.params.scrollbar.lockClass))}function M(){const r=e.params.scrollbar,t=e.scrollbar.el;t&&t.classList.remove(...S(e.isHorizontal()?r.horizontalClass:r.verticalClass)),H()}d("changeDirection",()=>{if(!e.scrollbar||!e.scrollbar.el)return;const r=e.params.scrollbar;let{el:t}=e.scrollbar;t=p(t),t.forEach(s=>{s.classList.remove(r.horizontalClass,r.verticalClass),s.classList.add(e.isHorizontal()?r.horizontalClass:r.verticalClass)})}),d("init",()=>{e.params.scrollbar.enabled===!1?O():(T(),k(),D())}),d("update resize observerUpdate lock unlock changeDirection",()=>{k()}),d("setTranslate",()=>{D()}),d("setTransition",(r,t)=>{K(t)}),d("enable disable",()=>{const{el:r}=e.scrollbar;r&&r.classList[e.enabled?"remove":"add"](...S(e.params.scrollbar.lockClass))}),d("destroy",()=>{M()});const V=()=>{e.el.classList.remove(...S(e.params.scrollbar.scrollbarDisabledClass)),e.scrollbar.el&&e.scrollbar.el.classList.remove(...S(e.params.scrollbar.scrollbarDisabledClass)),T(),k(),D()},O=()=>{e.el.classList.add(...S(e.params.scrollbar.scrollbarDisabledClass)),e.scrollbar.el&&e.scrollbar.el.classList.add(...S(e.params.scrollbar.scrollbarDisabledClass)),M()};Object.assign(e.scrollbar,{enable:V,disable:O,updateSize:k,setTranslate:D,init:T,destroy:M})}function ye(g){let{swiper:e,extendParams:_,on:d}=g;_({a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,itemRoleDescriptionMessage:null,slideRole:"group",id:null}}),e.a11y={clicked:!1};let c=null;function m(t){const s=c;s.length!==0&&(s.innerHTML="",s.innerHTML=t)}function y(t){t===void 0&&(t=16);const s=()=>Math.round(16*Math.random()).toString(16);return"x".repeat(t).replace(/x/g,s)}function h(t){t=p(t),t.forEach(s=>{s.setAttribute("tabIndex","0")})}function E(t){t=p(t),t.forEach(s=>{s.setAttribute("tabIndex","-1")})}function v(t,s){t=p(t),t.forEach(a=>{a.setAttribute("role",s)})}function i(t,s){t=p(t),t.forEach(a=>{a.setAttribute("aria-roledescription",s)})}function u(t,s){t=p(t),t.forEach(a=>{a.setAttribute("aria-controls",s)})}function w(t,s){t=p(t),t.forEach(a=>{a.setAttribute("aria-label",s)})}function D(t,s){t=p(t),t.forEach(a=>{a.setAttribute("id",s)})}function K(t,s){t=p(t),t.forEach(a=>{a.setAttribute("aria-live",s)})}function k(t){t=p(t),t.forEach(s=>{s.setAttribute("aria-disabled",!0)})}function P(t){t=p(t),t.forEach(s=>{s.setAttribute("aria-disabled",!1)})}function x(t){if(t.keyCode!==13&&t.keyCode!==32)return;const s=e.params.a11y,a=t.target;e.pagination&&e.pagination.el&&(a===e.pagination.el||e.pagination.el.contains(t.target))&&!t.target.matches(Q(e.params.pagination.bulletClass))||(e.navigation&&e.navigation.nextEl&&a===e.navigation.nextEl&&(e.isEnd&&!e.params.loop||e.slideNext(),e.isEnd?m(s.lastSlideMessage):m(s.nextSlideMessage)),e.navigation&&e.navigation.prevEl&&a===e.navigation.prevEl&&(e.isBeginning&&!e.params.loop||e.slidePrev(),e.isBeginning?m(s.firstSlideMessage):m(s.prevSlideMessage)),e.pagination&&a.matches(Q(e.params.pagination.bulletClass))&&a.click())}function W(){if(e.params.loop||e.params.rewind||!e.navigation)return;const{nextEl:t,prevEl:s}=e.navigation;s&&(e.isBeginning?(k(s),E(s)):(P(s),h(s))),t&&(e.isEnd?(k(t),E(t)):(P(t),h(t)))}function N(){return e.pagination&&e.pagination.bullets&&e.pagination.bullets.length}function B(){return N()&&e.params.pagination.clickable}function $(){const t=e.params.a11y;N()&&e.pagination.bullets.forEach(s=>{e.params.pagination.clickable&&(h(s),e.params.pagination.renderBullet||(v(s,"button"),w(s,t.paginationBulletMessage.replace(/\{\{index\}\}/,be(s)+1)))),s.matches(Q(e.params.pagination.bulletActiveClass))?s.setAttribute("aria-current","true"):s.removeAttribute("aria-current")})}const q=(t,s,a)=>{h(t),t.tagName!=="BUTTON"&&(v(t,"button"),t.addEventListener("keydown",x)),w(t,a),u(t,s)},H=()=>{e.a11y.clicked=!0},T=()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{e.destroyed||(e.a11y.clicked=!1)})})},M=t=>{if(e.a11y.clicked)return;const s=t.target.closest(`.${e.params.slideClass}, swiper-slide`);if(!s||!e.slides.includes(s))return;const a=e.slides.indexOf(s)===e.activeIndex,n=e.params.watchSlidesProgress&&e.visibleSlides&&e.visibleSlides.includes(s);a||n||t.sourceCapabilities&&t.sourceCapabilities.firesTouchEvents||(e.isHorizontal()?e.el.scrollLeft=0:e.el.scrollTop=0,e.slideTo(e.slides.indexOf(s),0))},V=()=>{const t=e.params.a11y;t.itemRoleDescriptionMessage&&i(e.slides,t.itemRoleDescriptionMessage),t.slideRole&&v(e.slides,t.slideRole);const s=e.slides.length;t.slideLabelMessage&&e.slides.forEach((a,n)=>{const b=e.params.loop?parseInt(a.getAttribute("data-swiper-slide-index"),10):n,f=t.slideLabelMessage.replace(/\{\{index\}\}/,b+1).replace(/\{\{slidesLength\}\}/,s);w(a,f)})},O=()=>{const t=e.params.a11y;e.el.append(c);const s=e.el;t.containerRoleDescriptionMessage&&i(s,t.containerRoleDescriptionMessage),t.containerMessage&&w(s,t.containerMessage);const a=e.wrapperEl,n=t.id||a.getAttribute("id")||`swiper-wrapper-${y(16)}`,b=e.params.autoplay&&e.params.autoplay.enabled?"off":"polite";D(a,n),K(a,b),V();let{nextEl:f,prevEl:l}=e.navigation?e.navigation:{};f=p(f),l=p(l),f&&f.forEach(U=>q(U,n,t.nextSlideMessage)),l&&l.forEach(U=>q(U,n,t.prevSlideMessage)),B()&&p(e.pagination.el).forEach(ie=>{ie.addEventListener("keydown",x)}),e.el.addEventListener("focus",M,!0),e.el.addEventListener("pointerdown",H,!0),e.el.addEventListener("pointerup",T,!0)};function r(){c&&c.remove();let{nextEl:t,prevEl:s}=e.navigation?e.navigation:{};t=p(t),s=p(s),t&&t.forEach(a=>a.removeEventListener("keydown",x)),s&&s.forEach(a=>a.removeEventListener("keydown",x)),B()&&p(e.pagination.el).forEach(n=>{n.removeEventListener("keydown",x)}),e.el.removeEventListener("focus",M,!0),e.el.removeEventListener("pointerdown",H,!0),e.el.removeEventListener("pointerup",T,!0)}d("beforeInit",()=>{c=re("span",e.params.a11y.notificationClass),c.setAttribute("aria-live","assertive"),c.setAttribute("aria-atomic","true")}),d("afterInit",()=>{e.params.a11y.enabled&&O()}),d("slidesLengthChange snapGridLengthChange slidesGridLengthChange",()=>{e.params.a11y.enabled&&V()}),d("fromEdge toEdge afterInit lock unlock",()=>{e.params.a11y.enabled&&W()}),d("paginationUpdate",()=>{e.params.a11y.enabled&&$()}),d("destroy",()=>{e.params.a11y.enabled&&r()})}var Ee={VITE_URL:"https://ec-course-api.hexschool.io/v2",VITE_PATH:"junapi",BASE_URL:"/Aromatherapy-project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:Z,VITE_PATH:ee}=Ee,we={data(){return{products:[],coupon_code:"",isLoading:!1,fullPage:!0}},setup(){return{modules:[me,ge,ve,ye]}},computed:{...Y(I,["carts"]),...Y(I,["final_total"]),...Y(I,["total"])},methods:{...te(I,["getCart"]),changeCartQty(g,e=1){const _={product_id:g.product_id,qty:e},d=`${Z}/api/${ee}/cart/${g.id}`;X.put(d,{data:_}).then(()=>{this.getCart()}).catch(c=>{F.fire(c.response.data.message)})},...te(I,["removeCartItem"]),addCouponCode(){const g=`${Z}/api/${ee}/coupon`,e={code:this.coupon_code};X.post(g,{data:e}).then(_=>{F.fire({title:_.data.message,confirmButtonColor:"#7fa185"}),this.getCart()}).catch(_=>{F.fire({title:_.response.data.message,confirmButtonColor:"#7fa185"})})},getProducts(){const g=`${Z}/api/${ee}/products`;X.get(g).then(e=>{this.products=e.data.products}).catch(e=>{F.fire({title:e.response.data.message,confirmButtonColor:"#7fa185"})})}},mounted(){this.getProducts(),this.getCart()},components:{Swiper:he,SwiperSlide:_e,loading:ne}},xe={class:"container pt-7"},Ce={class:"mt-3"},ke=o("h3",{class:"mt-3 mb-4"},"購物車",-1),Le={key:0,class:"row"},Se={class:"col-md-8"},De={class:"table"},Te=o("thead",null,[o("tr",null,[o("th",{scope:"col",class:"border-0 ps-0 text-center"},"品項"),o("th",{scope:"col",class:"border-0 text-center"},"數量"),o("th",{scope:"col",class:"border-0 text-center"},"金額"),o("th",{scope:"col",class:"border-0"})])],-1),Me={scope:"row",class:"border-0 px-0 font-weight-normal py-4 d-flex align-items-center"},Ae=["src","alt"],Pe={class:"mb-0 fw-bold ms-3"},ze={class:"border-0 align-middle",style:{"max-width":"160px"}},Re={class:"input-group"},Ie={class:"input-group-prepend text-center"},Ne=["onClick","disabled"],Be=o("i",{class:"fas fa-minus"},null,-1),$e=["onUpdate:modelValue"],qe={class:"input-group-append"},He=["onClick"],Ve=o("i",{class:"fas fa-plus"},null,-1),Oe={class:"border-0 align-middle"},Ue={class:"mb-0 ms-auto text-center"},Fe={class:"border-0 align-middle"},je=["onClick"],Ge=o("i",{class:"fas fa-times"},null,-1),Qe={class:"input-group mb-3"},Ke={class:"input-group-append"},We=o("i",{class:"bi bi-send-fill"},null,-1),Xe=[We],Ye={class:"col-md-4"},Je={class:"border p-4 mb-4"},Ze=o("h4",{class:"fw-bold mb-4"},"訂單明細",-1),et={class:"table text-muted border-bottom"},tt=o("th",{scope:"row",class:"border-0 px-0 pt-4 font-weight-normal"}," 訂單金額 ",-1),st={class:"text-end border-0 px-0 pt-4"},at=o("th",{scope:"row",class:"border-0 px-0 pt-0 pb-4 font-weight-normal"}," 折扣 ",-1),ot={class:"text-end border-0 px-0 pt-0 pb-4"},rt={class:"d-flex justify-content-between mt-4"},it=o("p",{class:"mb-0 h4 fw-bold"},"總額",-1),nt={class:"mb-0 h4 fw-bold"},lt={key:1},ct={class:"text-center py-7"},dt=o("i",{class:"bi bi-exclamation-octagon",style:{"font-size":"5rem"}},null,-1),pt=o("p",null,"購物車內無商品",-1),ut={class:"my-5"},ft=o("h3",{class:"fw-bold"},"其他商品",-1),bt={class:"swiper-container mt-4 mb-5"},mt={class:"swiper-wrapper"},gt={class:"swiper-slide"},ht={class:"card border-0 mb-4 position-relative position-relative"},_t=["src"],vt=o("a",{href:"#",class:"text-dark"},null,-1),yt={class:"card-body p-0"},Et={class:"mb-0 mt-3 fw-bold",style:{color:"#4e342e"}},wt={class:"text-muted mb-0"},xt={class:"text-muted"},Ct={class:"card-text text-primary-emphasis"};function kt(g,e,_,d,c,m){const y=j("loading"),h=j("RouterLink"),E=j("swiper-slide"),v=j("swiper");return L(),A(J,null,[z(y,{active:c.isLoading,"onUpdate:active":e[0]||(e[0]=i=>c.isLoading=i),"can-cancel":!0,"is-full-page":c.fullPage,loader:"dots"},null,8,["active","is-full-page"]),o("div",xe,[o("div",Ce,[ke,this.carts&&this.carts.length>0?(L(),A("div",Le,[o("div",Se,[o("table",De,[Te,o("tbody",null,[(L(!0),A(J,null,se(this.carts,i=>(L(),A("tr",{class:"border-bottom border-top",key:i.id},[o("th",Me,[o("img",{class:"d-md-block d-none",src:i.product.imageUrl,alt:i.product.title,style:{width:"72px",height:"72px","object-fit":"cover"}},null,8,Ae),o("p",Pe,C(i.product.title),1)]),o("td",ze,[o("div",Re,[o("div",Ie,[o("button",{class:"btn btn-outline-dark border-0 py-2",type:"button",id:"button-addon1",onClick:u=>{i.qty--,m.changeCartQty(i,i.qty)},disabled:i.qty===1},[G(" - "),Be],8,Ne)]),ae(o("input",{type:"number",class:"form-control border-0 text-center my-auto shadow-none",placeholder:"","aria-label":"Example text with button addon","aria-describedby":"button-addon1",min:"1","onUpdate:modelValue":u=>i.qty=u,readonly:""},null,8,$e),[[oe,i.qty]]),o("div",qe,[o("button",{class:"btn btn-outline-dark border-0 py-2",type:"button",id:"button-addon2",onClick:u=>{i.qty++,m.changeCartQty(i,i.qty)}},[G(" + "),Ve],8,He)])])]),o("td",Oe,[o("p",Ue,"NT$"+C(i.total),1)]),o("td",Fe,[o("button",{class:"btn btn-outline-dark border-0 py-2",type:"button",id:"button-addon1",onClick:u=>g.removeCartItem(i.id)}," x",8,je),Ge])]))),128))])]),o("div",Qe,[ae(o("input",{type:"text",class:"form-control rounded-0 border-bottom border-top-0 border-start-0 border-end-0 shadow-none",placeholder:"優惠碼","aria-label":"Recipient's username","aria-describedby":"button-addon2","onUpdate:modelValue":e[1]||(e[1]=i=>c.coupon_code=i)},null,512),[[oe,c.coupon_code]]),o("div",Ke,[o("button",{class:"btn btn-outline-dark border-bottom border-top-0 border-start-0 border-end-0 rounded-0",type:"button",id:"button-addon2",onClick:e[2]||(e[2]=(...i)=>m.addCouponCode&&m.addCouponCode(...i))},Xe)])])]),o("div",Ye,[o("div",Je,[Ze,o("table",et,[o("tbody",null,[o("tr",null,[tt,o("td",st," NT$"+C(this.total),1)]),o("tr",null,[at,o("td",ot,C(Math.round(this.final_total-this.total)),1)])])]),o("div",rt,[it,o("p",nt," NT$"+C(Math.round(this.final_total)),1)]),z(h,{class:"btn btn-dark w-100 mt-4 border-0",to:"/checkout",style:{"background-color":"#7fa185"}},{default:R(()=>[G(" 去買單")]),_:1})])])])):(L(),A("div",lt,[o("div",ct,[dt,pt,z(h,{class:"btn btn-secondary mt-4 border-0",to:"/Products",style:{"background-color":"#7fa185"}},{default:R(()=>[G(" 前往挑選商品")]),_:1})])])),o("div",ut,[ft,o("div",bt,[o("div",mt,[z(v,{slidesPerView:3,spaceBetween:30,pagination:{clickable:!0},modules:d.modules,class:"mySwiper"},{default:R(()=>[(L(!0),A(J,null,se(c.products,i=>(L(),ce(E,{key:i.id},{default:R(()=>[z(h,{class:"text-decoration-none",to:`/product/${i.id}`},{default:R(()=>[o("div",gt,[o("div",ht,[o("img",{src:i.imageUrl,class:"card-img-top rounded-0"},null,8,_t),vt,o("div",yt,[o("h4",Et,C(i.title),1),o("p",wt,[o("small",null,[o("span",xt,[o("del",null,"NT$"+C(i.origin_price),1)])])]),o("p",Ct," NT$"+C(i.price),1)])])])]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1},8,["modules"])])])])])])],64)}const zt=le(we,[["render",kt]]);export{zt as default};
