import{a as g,S as m}from"./sweetalert2.all-UHgEhJL2.js";import{_ as v,m as r,a as b,c as d,b as e,F as y,g as w,t as s,d as a,w as k,r as l,o as i,n as u,e as T}from"./index-Ejn4ikI0.js";import{c as n}from"./cartStore-pLsRKsRF.js";import{o as f}from"./order-Aata2GIH.js";/* empty css              */var N={VITE_URL:"https://ec-course-api.hexschool.io/v2",VITE_PATH:"junapi",BASE_URL:"/Aromatherapy-project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:V,VITE_PATH:O}=N,S={data(){return{form:{is_paid:!1},checked:""}},computed:{...r(n,["final_total"]),...r(n,["total"]),...r(f,["order"])},methods:{...b(f,["getOrder"]),ischeckNum(o){return/^[0-9]{3}$/.test(o)?!0:"請輸入正確的檢查碼"},...b(n,["getCart"]),payOrder(){const o=`${V}/api/${O}/pay/${this.orderId}`;g.post(o).then(()=>{this.getOrder(),this.getCart(),m.fire({title:"付款成功",confirmButtonColor:"#7fa185"}),this.$router.push("/checkoutSuccess")}).catch(c=>{m.fire({title:c.response.data.message,confirmButtonColor:"#7fa185"})})}},created(){this.orderId=this.$route.params.orderId,this.getOrder(),this.checked=localStorage.getItem("payment")}},$={class:"container pt-7"},E=e("div",{class:"row justify-content-center"},[e("div",{class:"col-md-10"},[e("h3",{class:"fw-bold mb-4 pt-3"},"付款")])],-1),j={class:"row flex-row-reverse justify-content-center pb-5"},C={class:"col-md-4"},I={class:"border p-4 mb-4"},A=["src"],B={class:"w-100"},F={class:"d-flex justify-content-between"},L={class:"mb-0 fw-bold"},P={class:"mb-0"},R={class:"mb-0 fw-bold"},D={class:"table mt-4 border-top border-bottom text-muted"},U=e("th",{scope:"row",class:"border-0 px-0 pt-4 font-weight-normal"}," 小計 ",-1),M={class:"text-end border-0 px-0 pt-4"},q=e("th",{scope:"row",class:"border-0 px-0 pt-4 font-weight-normal"}," 折扣 ",-1),H={class:"text-end border-0 px-0 pt-4"},z=e("th",{scope:"row",class:"border-0 px-0 pt-0 pb-4 font-weight-normal"}," 支付方式 ",-1),G={class:"text-end border-0 px-0 pt-0 pb-4"},J={class:"d-flex justify-content-between mt-4"},K=e("p",{class:"mb-0 h4 fw-bold"},"結帳金額",-1),Q={class:"mb-0 h4 fw-bold"},W={class:"col-md-6"},X={class:"accordion",id:"accordionExample"},Y={class:"card rounded-0"},Z=e("div",{class:"card-header bg-white border-0 py-3",id:"headingOne","data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne"},[e("p",{class:"mb-0 position-relative custom-checkout-label"}," 信用卡付款 ")],-1),ee={id:"collapseOne",class:"collapse show","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample"},te={class:"card-body bg-light ps-5 py-4"},se={class:"mb-2"},oe=e("label",{for:"Lorem ipsum1",class:"text-muted mb-0"},"信用卡號",-1),ae={class:"mb-0"},ce=e("label",{for:"Lorem ipsum2",class:"text-muted mb-0"},"檢查碼",-1),re=e("div",{class:"card rounded-0"},[e("div",{class:"card-header bg-white border-0 py-3 collapsed",id:"headingThree","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-expanded":"true","aria-controls":"collapseThree"},[e("p",{class:"mb-0 position-relative custom-checkout-label"}," ApplePay ")]),e("div",{id:"collapseThree",class:"collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample"},[e("div",{class:"card-body bg-light ps-5 py-4"},[e("div",{class:"mb-2"},[e("i",{class:"bi bi-credit-card pe-3"}),T(" Apple Pay ")])])])],-1),de=e("div",{class:"d-flex flex-column-reverse flex-md-row mt-4 justify-content-between align-items-md-center align-items-end w-100"},[e("button",{type:"submit",class:"btn btn-dark py-3 px-7 border-0",style:{"background-color":"#7fa185"}}," 確認付款 ")],-1);function le(o,c,ie,ne,pe,p){const h=l("VField"),_=l("error-message"),x=l("VForm");return i(),d("div",$,[E,e("div",j,[e("div",C,[e("div",I,[(i(!0),d(y,null,w(o.order,t=>(i(),d("div",{class:"d-flex pt-2",key:t.id},[e("img",{src:t.product.imageUrl,alt:"商品圖片",class:"me-2",style:{width:"48px",height:"48px","object-fit":"cover"}},null,8,A),e("div",B,[e("div",F,[e("p",L,s(t.product.title),1),e("p",P,"NT$"+s(t.total),1)]),e("p",R,"x"+s(t.qty),1)])]))),128)),e("table",D,[e("tbody",null,[e("tr",null,[U,e("td",M,"NT$"+s(this.total),1)]),e("tr",null,[q,e("td",H," NT$"+s(Math.round(this.final_total-this.total)),1)]),e("tr",null,[z,e("td",G,s(this.checked),1)])])]),e("div",J,[K,e("p",Q,"NT$"+s(Math.round(this.final_total)),1)])])]),e("div",W,[a(x,{ref:"form",onSubmit:p.payOrder},{default:k(({errors:t})=>[e("div",X,[e("div",Y,[Z,e("div",ee,[e("div",te,[e("div",se,[oe,a(h,{type:"text",class:u(["form-control",{"is-invalid":t.信用卡號}]),id:"creditCardNum",name:"信用卡號",placeholder:"xxxx xxxx xxxx xxxx",rules:"required|credit_card"},null,8,["class"]),a(_,{name:"信用卡號",class:"invalid-feedback"})]),e("div",ae,[ce,a(h,{type:"text",class:u(["form-control",{"is-invalid":t.檢查碼}]),id:"checkNum",placeholder:"xxx",rules:p.ischeckNum,name:"檢查碼"},null,8,["rules","class"]),a(_,{name:"檢查碼",class:"invalid-feedback"})])])])]),re]),de]),_:1},8,["onSubmit"])])])])}const fe=v(S,[["render",le]]);export{fe as default};
