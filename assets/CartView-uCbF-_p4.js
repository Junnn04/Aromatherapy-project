import{a as j,S as R}from"./sweetalert2.all-CRiE7WjR.js";import{l as oe}from"./index-1pQDvJBu.js";import{_ as re,a as ne,c as A,d as z,b as o,F as J,g as Z,w as I,h as ee,k as te,t as C,r as F,o as L,e as G,j as ie}from"./index-ZW9AbQuS.js";import{c as le}from"./cartStore-jA6we4sA.js";import{g as ce,m as p,c as S,b as de,d as W,e as se,n as pe,f as ue,h as fe,N as be,P as me,S as ge,a as he}from"./pagination-u9sAcn5G.js";import"./vue.runtime.esm-bundler-hUgpTmnp.js";function _e(u){let{swiper:e,extendParams:_,on:d,emit:l}=u;const g=ce();let y=!1,h=null,E=null,v,n,f,w;_({scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag",scrollbarDisabledClass:"swiper-scrollbar-disabled",horizontalClass:"swiper-scrollbar-horizontal",verticalClass:"swiper-scrollbar-vertical"}}),e.scrollbar={el:null,dragEl:null};function D(){if(!e.params.scrollbar.el||!e.scrollbar.el)return;const{scrollbar:r,rtlTranslate:t}=e,{dragEl:s,el:a}=r,i=e.params.scrollbar,m=e.params.loop?e.progressLoop:e.progress;let b=n,c=(f-n)*m;t?(c=-c,c>0?(b=n-c,c=0):-c+n>f&&(b=f+c)):c<0?(b=n+c,c=0):c+n>f&&(b=f-c),e.isHorizontal()?(s.style.transform=`translate3d(${c}px, 0, 0)`,s.style.width=`${b}px`):(s.style.transform=`translate3d(0px, ${c}px, 0)`,s.style.height=`${b}px`),i.hide&&(clearTimeout(h),a.style.opacity=1,h=setTimeout(()=>{a.style.opacity=0,a.style.transitionDuration="400ms"},1e3))}function X(r){!e.params.scrollbar.el||!e.scrollbar.el||(e.scrollbar.dragEl.style.transitionDuration=`${r}ms`)}function k(){if(!e.params.scrollbar.el||!e.scrollbar.el)return;const{scrollbar:r}=e,{dragEl:t,el:s}=r;t.style.width="",t.style.height="",f=e.isHorizontal()?s.offsetWidth:s.offsetHeight,w=e.size/(e.virtualSize+e.params.slidesOffsetBefore-(e.params.centeredSlides?e.snapGrid[0]:0)),e.params.scrollbar.dragSize==="auto"?n=f*w:n=parseInt(e.params.scrollbar.dragSize,10),e.isHorizontal()?t.style.width=`${n}px`:t.style.height=`${n}px`,w>=1?s.style.display="none":s.style.display="",e.params.scrollbar.hide&&(s.style.opacity=0),e.params.watchOverflow&&e.enabled&&r.el.classList[e.isLocked?"add":"remove"](e.params.scrollbar.lockClass)}function P(r){return e.isHorizontal()?r.clientX:r.clientY}function x(r){const{scrollbar:t,rtlTranslate:s}=e,{el:a}=t;let i;i=(P(r)-ue(a)[e.isHorizontal()?"left":"top"]-(v!==null?v:n/2))/(f-n),i=Math.max(Math.min(i,1),0),s&&(i=1-i);const m=e.minTranslate()+(e.maxTranslate()-e.minTranslate())*i;e.updateProgress(m),e.setTranslate(m),e.updateActiveIndex(),e.updateSlidesClasses()}function Y(r){const t=e.params.scrollbar,{scrollbar:s,wrapperEl:a}=e,{el:i,dragEl:m}=s;y=!0,v=r.target===m?P(r)-r.target.getBoundingClientRect()[e.isHorizontal()?"left":"top"]:null,r.preventDefault(),r.stopPropagation(),a.style.transitionDuration="100ms",m.style.transitionDuration="100ms",x(r),clearTimeout(E),i.style.transitionDuration="0ms",t.hide&&(i.style.opacity=1),e.params.cssMode&&(e.wrapperEl.style["scroll-snap-type"]="none"),l("scrollbarDragStart",r)}function N(r){const{scrollbar:t,wrapperEl:s}=e,{el:a,dragEl:i}=t;y&&(r.preventDefault?r.preventDefault():r.returnValue=!1,x(r),s.style.transitionDuration="0ms",a.style.transitionDuration="0ms",i.style.transitionDuration="0ms",l("scrollbarDragMove",r))}function q(r){const t=e.params.scrollbar,{scrollbar:s,wrapperEl:a}=e,{el:i}=s;y&&(y=!1,e.params.cssMode&&(e.wrapperEl.style["scroll-snap-type"]="",a.style.transitionDuration=""),t.hide&&(clearTimeout(E),E=pe(()=>{i.style.opacity=0,i.style.transitionDuration="400ms"},1e3)),l("scrollbarDragEnd",r),t.snapOnRelease&&e.slideToClosest())}function B(r){const{scrollbar:t,params:s}=e,a=t.el;if(!a)return;const i=a,m=s.passiveListeners?{passive:!1,capture:!1}:!1,b=s.passiveListeners?{passive:!0,capture:!1}:!1;if(!i)return;const c=r==="on"?"addEventListener":"removeEventListener";i[c]("pointerdown",Y,m),g[c]("pointermove",N,m),g[c]("pointerup",q,b)}function H(){!e.params.scrollbar.el||!e.scrollbar.el||B("on")}function V(){!e.params.scrollbar.el||!e.scrollbar.el||B("off")}function T(){const{scrollbar:r,el:t}=e;e.params.scrollbar=de(e,e.originalParams.scrollbar,e.params.scrollbar,{el:"swiper-scrollbar"});const s=e.params.scrollbar;if(!s.el)return;let a;if(typeof s.el=="string"&&e.isElement&&(a=e.el.querySelector(s.el)),!a&&typeof s.el=="string"){if(a=g.querySelectorAll(s.el),!a.length)return}else a||(a=s.el);e.params.uniqueNavElements&&typeof s.el=="string"&&a.length>1&&t.querySelectorAll(s.el).length===1&&(a=t.querySelector(s.el)),a.length>0&&(a=a[0]),a.classList.add(e.isHorizontal()?s.horizontalClass:s.verticalClass);let i;a&&(i=a.querySelector(W(e.params.scrollbar.dragClass)),i||(i=se("div",e.params.scrollbar.dragClass),a.append(i))),Object.assign(r,{el:a,dragEl:i}),s.draggable&&H(),a&&a.classList[e.enabled?"remove":"add"](...S(e.params.scrollbar.lockClass))}function M(){const r=e.params.scrollbar,t=e.scrollbar.el;t&&t.classList.remove(...S(e.isHorizontal()?r.horizontalClass:r.verticalClass)),V()}d("changeDirection",()=>{if(!e.scrollbar||!e.scrollbar.el)return;const r=e.params.scrollbar;let{el:t}=e.scrollbar;t=p(t),t.forEach(s=>{s.classList.remove(r.horizontalClass,r.verticalClass),s.classList.add(e.isHorizontal()?r.horizontalClass:r.verticalClass)})}),d("init",()=>{e.params.scrollbar.enabled===!1?U():(T(),k(),D())}),d("update resize observerUpdate lock unlock changeDirection",()=>{k()}),d("setTranslate",()=>{D()}),d("setTransition",(r,t)=>{X(t)}),d("enable disable",()=>{const{el:r}=e.scrollbar;r&&r.classList[e.enabled?"remove":"add"](...S(e.params.scrollbar.lockClass))}),d("destroy",()=>{M()});const O=()=>{e.el.classList.remove(...S(e.params.scrollbar.scrollbarDisabledClass)),e.scrollbar.el&&e.scrollbar.el.classList.remove(...S(e.params.scrollbar.scrollbarDisabledClass)),T(),k(),D()},U=()=>{e.el.classList.add(...S(e.params.scrollbar.scrollbarDisabledClass)),e.scrollbar.el&&e.scrollbar.el.classList.add(...S(e.params.scrollbar.scrollbarDisabledClass)),M()};Object.assign(e.scrollbar,{enable:O,disable:U,updateSize:k,setTranslate:D,init:T,destroy:M})}function ve(u){let{swiper:e,extendParams:_,on:d}=u;_({a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,itemRoleDescriptionMessage:null,slideRole:"group",id:null}}),e.a11y={clicked:!1};let l=null;function g(t){const s=l;s.length!==0&&(s.innerHTML="",s.innerHTML=t)}function y(t){t===void 0&&(t=16);const s=()=>Math.round(16*Math.random()).toString(16);return"x".repeat(t).replace(/x/g,s)}function h(t){t=p(t),t.forEach(s=>{s.setAttribute("tabIndex","0")})}function E(t){t=p(t),t.forEach(s=>{s.setAttribute("tabIndex","-1")})}function v(t,s){t=p(t),t.forEach(a=>{a.setAttribute("role",s)})}function n(t,s){t=p(t),t.forEach(a=>{a.setAttribute("aria-roledescription",s)})}function f(t,s){t=p(t),t.forEach(a=>{a.setAttribute("aria-controls",s)})}function w(t,s){t=p(t),t.forEach(a=>{a.setAttribute("aria-label",s)})}function D(t,s){t=p(t),t.forEach(a=>{a.setAttribute("id",s)})}function X(t,s){t=p(t),t.forEach(a=>{a.setAttribute("aria-live",s)})}function k(t){t=p(t),t.forEach(s=>{s.setAttribute("aria-disabled",!0)})}function P(t){t=p(t),t.forEach(s=>{s.setAttribute("aria-disabled",!1)})}function x(t){if(t.keyCode!==13&&t.keyCode!==32)return;const s=e.params.a11y,a=t.target;e.pagination&&e.pagination.el&&(a===e.pagination.el||e.pagination.el.contains(t.target))&&!t.target.matches(W(e.params.pagination.bulletClass))||(e.navigation&&e.navigation.nextEl&&a===e.navigation.nextEl&&(e.isEnd&&!e.params.loop||e.slideNext(),e.isEnd?g(s.lastSlideMessage):g(s.nextSlideMessage)),e.navigation&&e.navigation.prevEl&&a===e.navigation.prevEl&&(e.isBeginning&&!e.params.loop||e.slidePrev(),e.isBeginning?g(s.firstSlideMessage):g(s.prevSlideMessage)),e.pagination&&a.matches(W(e.params.pagination.bulletClass))&&a.click())}function Y(){if(e.params.loop||e.params.rewind||!e.navigation)return;const{nextEl:t,prevEl:s}=e.navigation;s&&(e.isBeginning?(k(s),E(s)):(P(s),h(s))),t&&(e.isEnd?(k(t),E(t)):(P(t),h(t)))}function N(){return e.pagination&&e.pagination.bullets&&e.pagination.bullets.length}function q(){return N()&&e.params.pagination.clickable}function B(){const t=e.params.a11y;N()&&e.pagination.bullets.forEach(s=>{e.params.pagination.clickable&&(h(s),e.params.pagination.renderBullet||(v(s,"button"),w(s,t.paginationBulletMessage.replace(/\{\{index\}\}/,fe(s)+1)))),s.matches(W(e.params.pagination.bulletActiveClass))?s.setAttribute("aria-current","true"):s.removeAttribute("aria-current")})}const H=(t,s,a)=>{h(t),t.tagName!=="BUTTON"&&(v(t,"button"),t.addEventListener("keydown",x)),w(t,a),f(t,s)},V=()=>{e.a11y.clicked=!0},T=()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{e.destroyed||(e.a11y.clicked=!1)})})},M=t=>{if(e.a11y.clicked)return;const s=t.target.closest(`.${e.params.slideClass}, swiper-slide`);if(!s||!e.slides.includes(s))return;const a=e.slides.indexOf(s)===e.activeIndex,i=e.params.watchSlidesProgress&&e.visibleSlides&&e.visibleSlides.includes(s);a||i||t.sourceCapabilities&&t.sourceCapabilities.firesTouchEvents||(e.isHorizontal()?e.el.scrollLeft=0:e.el.scrollTop=0,e.slideTo(e.slides.indexOf(s),0))},O=()=>{const t=e.params.a11y;t.itemRoleDescriptionMessage&&n(e.slides,t.itemRoleDescriptionMessage),t.slideRole&&v(e.slides,t.slideRole);const s=e.slides.length;t.slideLabelMessage&&e.slides.forEach((a,i)=>{const m=e.params.loop?parseInt(a.getAttribute("data-swiper-slide-index"),10):i,b=t.slideLabelMessage.replace(/\{\{index\}\}/,m+1).replace(/\{\{slidesLength\}\}/,s);w(a,b)})},U=()=>{const t=e.params.a11y;e.el.append(l);const s=e.el;t.containerRoleDescriptionMessage&&n(s,t.containerRoleDescriptionMessage),t.containerMessage&&w(s,t.containerMessage);const a=e.wrapperEl,i=t.id||a.getAttribute("id")||`swiper-wrapper-${y(16)}`,m=e.params.autoplay&&e.params.autoplay.enabled?"off":"polite";D(a,i),X(a,m),O();let{nextEl:b,prevEl:c}=e.navigation?e.navigation:{};b=p(b),c=p(c),b&&b.forEach($=>H($,i,t.nextSlideMessage)),c&&c.forEach($=>H($,i,t.prevSlideMessage)),q()&&p(e.pagination.el).forEach(ae=>{ae.addEventListener("keydown",x)}),e.el.addEventListener("focus",M,!0),e.el.addEventListener("pointerdown",V,!0),e.el.addEventListener("pointerup",T,!0)};function r(){l&&l.remove();let{nextEl:t,prevEl:s}=e.navigation?e.navigation:{};t=p(t),s=p(s),t&&t.forEach(a=>a.removeEventListener("keydown",x)),s&&s.forEach(a=>a.removeEventListener("keydown",x)),q()&&p(e.pagination.el).forEach(i=>{i.removeEventListener("keydown",x)}),e.el.removeEventListener("focus",M,!0),e.el.removeEventListener("pointerdown",V,!0),e.el.removeEventListener("pointerup",T,!0)}d("beforeInit",()=>{l=se("span",e.params.a11y.notificationClass),l.setAttribute("aria-live","assertive"),l.setAttribute("aria-atomic","true")}),d("afterInit",()=>{e.params.a11y.enabled&&U()}),d("slidesLengthChange snapGridLengthChange slidesGridLengthChange",()=>{e.params.a11y.enabled&&O()}),d("fromEdge toEdge afterInit lock unlock",()=>{e.params.a11y.enabled&&Y()}),d("paginationUpdate",()=>{e.params.a11y.enabled&&B()}),d("destroy",()=>{e.params.a11y.enabled&&r()})}var ye={VITE_URL:"https://ec-course-api.hexschool.io/v2",VITE_PATH:"junapi",BASE_URL:"/Aromatherapy-project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:Q,VITE_PATH:K}=ye,Ee={data(){return{products:[],carts:{},coupon_code:"",isLoading:!1,fullPage:!0,onCancel:!0}},setup(){return{modules:[be,me,_e,ve]}},methods:{getCart(){this.isLoading=!0;const u=`${Q}/api/${K}/cart`;j.get(u).then(e=>{this.carts=e.data.data,this.isLoading=!1}).catch(e=>{R.fire(e.response.data.message),this.isLoading=!1})},changeCartQty(u,e=1){const _={product_id:u.product_id,qty:e},d=`${Q}/api/${K}/cart/${u.id}`;j.put(d,{data:_}).then(()=>{this.getCart()}).catch(l=>{R.fire(l.response.data.message)})},...ne(le,["removeCartItem"]),addCouponCode(){const u=`${Q}/api/${K}/coupon`,e={code:this.coupon_code};j.post(u,{data:e}).then(_=>{R.fire(_.data.message),this.getCart()}).catch(_=>{R.fire(_.response.data.message)})},getProducts(){const u=`${Q}/api/${K}/products`;j.get(u).then(e=>{this.products=e.data.products}).catch(e=>{R.fire(e.response.data.message)})}},mounted(){this.getProducts(),this.getCart()},components:{Swiper:ge,SwiperSlide:he,loading:oe}},we={class:"container pt-7"},xe={class:"mt-3"},Ce=o("h3",{class:"mt-3 mb-4"},"購物車",-1),ke={class:"row"},Le={class:"col-md-8"},Se={key:0,class:"table"},De=o("thead",null,[o("tr",null,[o("th",{scope:"col",class:"border-0 ps-0 text-center"},"品項"),o("th",{scope:"col",class:"border-0 text-center"},"數量"),o("th",{scope:"col",class:"border-0 text-center"},"金額"),o("th",{scope:"col",class:"border-0"})])],-1),Te={scope:"row",class:"border-0 px-0 font-weight-normal py-4 d-flex align-items-center"},Me=["src","alt"],Ae={class:"mb-0 fw-bold ms-3"},Pe={class:"border-0 align-middle",style:{"max-width":"160px"}},Re={class:"input-group"},ze={class:"input-group-prepend text-center"},Ie=["onClick","disabled"],Ne=o("i",{class:"fas fa-minus"},null,-1),qe=["onUpdate:modelValue"],Be={class:"input-group-append"},He=["onClick"],Ve=o("i",{class:"fas fa-plus"},null,-1),Oe={class:"border-0 align-middle"},Ue={class:"mb-0 ms-auto text-center"},$e={class:"border-0 align-middle"},je=["onClick"],Fe=o("i",{class:"fas fa-times"},null,-1),Ge={key:1},Qe={class:"text-center py-7"},Ke=o("i",{class:"bi bi-exclamation-octagon",style:{"font-size":"5rem"}},null,-1),We=o("p",null,"購物車內無商品",-1),Xe={class:"input-group w-50 mb-3"},Ye={class:"input-group-append"},Je=o("i",{class:"bi bi-send-fill"},null,-1),Ze=[Je],et={class:"col-md-4"},tt={class:"border p-4 mb-4"},st=o("h4",{class:"fw-bold mb-4"},"訂單明細",-1),at={class:"table text-muted border-bottom"},ot=o("th",{scope:"row",class:"border-0 px-0 pt-4 font-weight-normal"}," 訂單金額 ",-1),rt={class:"text-end border-0 px-0 pt-4"},nt=o("th",{scope:"row",class:"border-0 px-0 pt-0 pb-4 font-weight-normal"}," 折扣 ",-1),it={class:"text-end border-0 px-0 pt-0 pb-4"},lt={class:"d-flex justify-content-between mt-4"},ct=o("p",{class:"mb-0 h4 fw-bold"},"總額",-1),dt={class:"mb-0 h4 fw-bold"},pt={class:"my-5"},ut=o("h3",{class:"fw-bold"},"其他商品",-1),ft={class:"swiper-container mt-4 mb-5"},bt={class:"swiper-wrapper"},mt={class:"swiper-slide"},gt={class:"card border-0 mb-4 position-relative position-relative"},ht=["src"],_t=o("a",{href:"#",class:"text-dark"},null,-1),vt={class:"card-body p-0"},yt={class:"mb-0 mt-3 fw-bold",style:{color:"#4e342e"}},Et={class:"card-text mb-0 text-primary-emphasis"},wt={class:"text-muted"},xt={class:"text-muted"};function Ct(u,e,_,d,l,g){const y=F("loading"),h=F("RouterLink"),E=F("swiper-slide"),v=F("swiper");return L(),A(J,null,[z(y,{active:l.isLoading,"onUpdate:active":e[0]||(e[0]=n=>l.isLoading=n),"can-cancel":!0,"on-cancel":l.onCancel,"is-full-page":l.fullPage,loader:"dots"},null,8,["active","on-cancel","is-full-page"]),o("div",we,[o("div",xe,[Ce,o("div",ke,[o("div",Le,[l.carts&&l.carts.carts.length>0?(L(),A("table",Se,[De,o("tbody",null,[(L(!0),A(J,null,Z(l.carts.carts,n=>(L(),A("tr",{class:"border-bottom border-top",key:n.id},[o("th",Te,[o("img",{class:"d-md-block d-none",src:n.product.imageUrl,alt:n.product.title,style:{width:"72px",height:"72px","object-fit":"cover"}},null,8,Me),o("p",Ae,C(n.product.title),1)]),o("td",Pe,[o("div",Re,[o("div",ze,[o("button",{class:"btn btn-outline-dark border-0 py-2",type:"button",id:"button-addon1",onClick:f=>{n.qty--,g.changeCartQty(n,n.qty)},disabled:n.qty===1},[G(" - "),Ne],8,Ie)]),ee(o("input",{type:"number",class:"form-control border-0 text-center my-auto shadow-none",placeholder:"","aria-label":"Example text with button addon","aria-describedby":"button-addon1",min:"1","onUpdate:modelValue":f=>n.qty=f,readonly:""},null,8,qe),[[te,n.qty]]),o("div",Be,[o("button",{class:"btn btn-outline-dark border-0 py-2",type:"button",id:"button-addon2",onClick:f=>{n.qty++,g.changeCartQty(n,n.qty)}},[G(" + "),Ve],8,He)])])]),o("td",Oe,[o("p",Ue,"NT$"+C(n.total),1)]),o("td",$e,[o("button",{class:"btn btn-outline-dark border-0 py-2",type:"button",id:"button-addon1",onClick:f=>u.removeCartItem(n.id)}," x",8,je),Fe])]))),128))])])):(L(),A("div",Ge,[o("div",Qe,[Ke,We,z(h,{class:"btn btn-secondary mt-4 border-0",to:"/Products"},{default:I(()=>[G(" 前往挑選商品")]),_:1})])])),o("div",Xe,[ee(o("input",{type:"text",class:"form-control rounded-0 border-bottom border-top-0 border-start-0 border-end-0 shadow-none",placeholder:"優惠碼","aria-label":"Recipient's username","aria-describedby":"button-addon2","onUpdate:modelValue":e[1]||(e[1]=n=>l.coupon_code=n)},null,512),[[te,l.coupon_code]]),o("div",Ye,[o("button",{class:"btn btn-outline-dark border-bottom border-top-0 border-start-0 border-end-0 rounded-0",type:"button",id:"button-addon2",onClick:e[2]||(e[2]=(...n)=>g.addCouponCode&&g.addCouponCode(...n))},Ze)])])]),o("div",et,[o("div",tt,[st,o("table",at,[o("tbody",null,[o("tr",null,[ot,o("td",rt," NT$"+C(l.carts.total),1)]),o("tr",null,[nt,o("td",it,C(l.carts.final_total-l.carts.total),1)])])]),o("div",lt,[ct,o("p",dt,"NT$"+C(l.carts.final_total),1)]),z(h,{class:"btn btn-dark w-100 mt-4 border-0",to:"/checkout",style:{"background-color":"#7fa185"}},{default:I(()=>[G(" 去買單")]),_:1})])])]),o("div",pt,[ut,o("div",ft,[o("div",bt,[z(v,{ref:"{swiperRef}",slidesPerView:3,centeredSlides:!0,spaceBetween:30,pagination:{type:"fraction"},navigation:!0,modules:d.modules,onSwiper:u.onSwiper,onSlideChange:u.onSlideChange},{default:I(()=>[(L(!0),A(J,null,Z(l.products,n=>(L(),ie(E,{key:n.id},{default:I(()=>[o("div",mt,[o("div",gt,[z(h,{class:"text-decoration-none",to:`/product/${n.id}`},{default:I(()=>[o("img",{src:n.imageUrl,class:"card-img-top rounded-0"},null,8,ht),_t,o("div",vt,[o("h4",yt,C(n.title),1),o("p",Et," NT$"+C(n.price),1),o("p",wt,[o("span",xt,[o("del",null,"NT$"+C(n.origin_price),1)])])])]),_:2},1032,["to"])])])]),_:2},1024))),128))]),_:1},8,["modules","onSwiper","onSlideChange"])])])])])])],64)}const At=re(Ee,[["render",Ct]]);export{At as default};
