import{a as p,S as c}from"./sweetalert2.all-WMIiuvla.js";import{l as S}from"./index-Fn4hfZu5.js";import{P as N,N as P,S as E,a as R}from"./pagination-4aJW3gbC.js";import{_ as U,c as l,d as b,b as t,F as y,g as x,h as C,l as k,t as a,w as m,r as f,o as r,e as w,j as q}from"./index-SsVEw1IR.js";import"./vue.runtime.esm-bundler-Fudv9Vhl.js";var B={VITE_URL:"https://ec-course-api.hexschool.io/v2",VITE_PATH:"junapi",BASE_URL:"/Aromatherapy-project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:_,VITE_PATH:u}=B,I={data(){return{products:[],carts:{},coupon_code:"",isLoading:!1,fullPage:!0,onCancel:!0}},setup(){return{modules:[N,P]}},methods:{getCart(){this.isLoading=!0;const n=`${_}/api/${u}/cart`;p.get(n).then(s=>{this.carts=s.data.data,this.isLoading=!1}).catch(s=>{c.fire(s.response.data.message),this.isLoading=!1})},changeCartQty(n,s=1){const d={product_id:n.product_id,qty:s},g=`${_}/api/${u}/cart/${n.id}`;p.put(g,{data:d}).then(()=>{this.getCart()}).catch(e=>{c.fire(e.response.data.message)})},removeCartItem(n){const s=`${_}/api/${u}/cart/${n}`;p.delete(s).then(()=>{this.getCart()}).catch(d=>{c.fire(d.response.data.message)})},addCouponCode(){const n=`${_}/api/${u}/coupon`,s={code:this.coupon_code};p.post(n,{data:s}).then(d=>{c.fire(d.data.message),this.getCart()}).catch(d=>{c.fire(d.response.data.message)})},getProducts(){const n=`${_}/api/${u}/products`;p.get(n).then(s=>{this.products=s.data.products}).catch(s=>{c.fire(s.response.data.message)})}},mounted(){this.getProducts(),this.getCart()},components:{Swiper:E,SwiperSlide:R,loading:S}},$={class:"container pt-7"},j={class:"mt-3"},D=t("h3",{class:"mt-3 mb-4"},"購物車",-1),A={class:"row"},Q={class:"col-md-8"},F={key:0,class:"table"},H=t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"border-0 ps-0"},"品項"),t("th",{scope:"col",class:"border-0"},"數量"),t("th",{scope:"col",class:"border-0"},"金額"),t("th",{scope:"col",class:"border-0"})])],-1),M={scope:"row",class:"border-0 px-0 font-weight-normal py-4 d-flex align-items-center"},O=["src","alt"],z={class:"mb-0 fw-bold ms-3"},G={class:"border-0 align-middle",style:{"max-width":"160px"}},J={class:"input-group pe-5"},K={class:"input-group-prepend"},W=["onClick","disabled"],X=t("i",{class:"fas fa-minus"},null,-1),Y=["onUpdate:modelValue"],Z={class:"input-group-append"},tt=["onClick"],ot=t("i",{class:"fas fa-plus"},null,-1),st={class:"border-0 align-middle"},et={class:"mb-0 ms-auto"},nt={class:"border-0 align-middle"},dt=["onClick"],at=t("i",{class:"fas fa-times"},null,-1),rt={key:1},ct=t("p",null,"購惡",-1),lt=[ct],it={class:"input-group w-50 mb-3"},pt={class:"input-group-append"},_t=t("i",{class:"bi bi-send-fill"},null,-1),ut=[_t],ht={class:"col-md-4"},bt={class:"border p-4 mb-4"},mt=t("h4",{class:"fw-bold mb-4"},"訂單明細",-1),ft={class:"table text-muted border-bottom"},gt=t("th",{scope:"row",class:"border-0 px-0 pt-4 font-weight-normal"}," 訂單金額 ",-1),yt={class:"text-end border-0 px-0 pt-4"},wt=t("th",{scope:"row",class:"border-0 px-0 pt-0 pb-4 font-weight-normal"}," 折扣 ",-1),vt={class:"text-end border-0 px-0 pt-0 pb-4"},xt={class:"d-flex justify-content-between mt-4"},Ct=t("p",{class:"mb-0 h4 fw-bold"},"總額",-1),kt={class:"mb-0 h4 fw-bold"},Tt={class:"my-5"},Vt=t("h3",{class:"fw-bold"},"其他商品",-1),Lt={class:"swiper-container mt-4 mb-5"},St={class:"swiper-wrapper"},Nt={class:"swiper-slide"},Pt={class:"card border-0 mb-4 position-relative position-relative"},Et=["src"],Rt=t("a",{href:"#",class:"text-dark"},null,-1),Ut={class:"card-body p-0"},qt={class:"mb-0 mt-3 fw-bold",style:{color:"#4e342e"}},Bt={class:"card-text mb-0 text-primary-emphasis"},It={class:"text-muted"},$t={class:"text-muted"};function jt(n,s,d,g,e,i){const T=f("loading"),v=f("RouterLink"),V=f("swiper-slide"),L=f("swiper");return r(),l(y,null,[b(T,{active:e.isLoading,"onUpdate:active":s[0]||(s[0]=o=>e.isLoading=o),"can-cancel":!0,"on-cancel":e.onCancel,"is-full-page":e.fullPage,loader:"dots"},null,8,["active","on-cancel","is-full-page"]),t("div",$,[t("div",j,[D,t("div",A,[t("div",Q,[typeof e.carts<"u"?(r(),l("table",F,[H,t("tbody",null,[(r(!0),l(y,null,x(e.carts.carts,o=>(r(),l("tr",{class:"border-bottom border-top",key:o.id},[t("th",M,[t("img",{src:o.product.imageUrl,alt:o.product.title,style:{width:"72px",height:"72px","object-fit":"cover"}},null,8,O),t("p",z,a(o.product.title),1)]),t("td",G,[t("div",J,[t("div",K,[t("button",{class:"btn btn-outline-dark border-0 py-2",type:"button",id:"button-addon1",onClick:h=>{o.qty--,i.changeCartQty(o,o.qty)},disabled:o.qty===1},[w(" - "),X],8,W)]),C(t("input",{type:"number",class:"form-control border-0 text-center my-auto shadow-none",placeholder:"","aria-label":"Example text with button addon","aria-describedby":"button-addon1",min:"1","onUpdate:modelValue":h=>o.qty=h,readonly:""},null,8,Y),[[k,o.qty]]),t("div",Z,[t("button",{class:"btn btn-outline-dark border-0 py-2",type:"button",id:"button-addon2",onClick:h=>{o.qty++,i.changeCartQty(o,o.qty)}},[w(" + "),ot],8,tt)])])]),t("td",st,[t("p",et,"NT$"+a(o.total),1)]),t("td",nt,[t("button",{class:"btn btn-outline-dark border-0 py-2",type:"button",id:"button-addon1",onClick:h=>i.removeCartItem(o.id)}," x",8,dt),at])]))),128))])])):(r(),l("div",rt,lt)),t("div",it,[C(t("input",{type:"text",class:"form-control rounded-0 border-bottom border-top-0 border-start-0 border-end-0 shadow-none",placeholder:"優惠碼","aria-label":"Recipient's username","aria-describedby":"button-addon2","onUpdate:modelValue":s[1]||(s[1]=o=>e.coupon_code=o)},null,512),[[k,e.coupon_code]]),t("div",pt,[t("button",{class:"btn btn-outline-dark border-bottom border-top-0 border-start-0 border-end-0 rounded-0",type:"button",id:"button-addon2",onClick:s[2]||(s[2]=(...o)=>i.addCouponCode&&i.addCouponCode(...o))},ut)])])]),t("div",ht,[t("div",bt,[mt,t("table",ft,[t("tbody",null,[t("tr",null,[gt,t("td",yt," NT$"+a(e.carts.total),1)]),t("tr",null,[wt,t("td",vt,a(e.carts.final_total-e.carts.total),1)])])]),t("div",xt,[Ct,t("p",kt,"NT$"+a(e.carts.final_total),1)]),b(v,{class:"btn btn-dark w-100 mt-4 border-0",to:"/checkout",style:{"background-color":"#7fa185"}},{default:m(()=>[w(" 去買單")]),_:1})])])]),t("div",Tt,[Vt,t("div",Lt,[t("div",St,[b(L,{ref:"{swiperRef}",slidesPerView:3,centeredSlides:!0,spaceBetween:30,pagination:{type:"fraction"},navigation:!0,modules:g.modules},{default:m(()=>[(r(!0),l(y,null,x(e.products,o=>(r(),q(V,{key:o.id},{default:m(()=>[t("div",Nt,[t("div",Pt,[b(v,{class:"text-decoration-none",to:`/product/${o.id}`},{default:m(()=>[t("img",{src:o.imageUrl,class:"card-img-top rounded-0"},null,8,Et),Rt,t("div",Ut,[t("h4",qt,a(o.title),1),t("p",Bt," NT$"+a(o.price),1),t("p",It,[t("span",$t,[t("del",null,"NT$"+a(o.origin_price),1)])])])]),_:2},1032,["to"])])])]),_:2},1024))),128))]),_:1},8,["modules"])])])])])])],64)}const Mt=U(I,[["render",jt]]);export{Mt as default};
