import{a as u}from"./axios-L6U4YIEh.js";import{S as N}from"./sweetalert2.all-7pLa5uUz.js";import{P as $,N as V,S as E,a as S}from"./pagination-E2T4qtDM.js";import{_ as q,c as _,b as t,F as y,aV as w,J as B,bC as C,bs as k,t as c,d as l,w as r,r as x,o as n,e as i,I as L}from"./index-u5xObLHv.js";import"./_commonjsHelpers-1J56E-h6.js";var R={VITE_URL:"https://ec-course-api.hexschool.io/v2",VITE_PATH:"junapi",BASE_URL:"/Aromatherapy-project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:h,VITE_PATH:b}=R,D={data(){return{products:[],carts:{},coupon_code:""}},setup(){return{modules:[$,V]}},methods:{getCart(){const e=`${h}/api/${b}/cart`;u.get(e).then(o=>{console.log(o),this.carts=o.data.data}).catch(o=>{alert(o.message)})},changeCartQty(e,o=1){const d={product_id:e.product_id,qty:o},g=`${h}/api/${b}/cart/${e.id}`;u.put(g,{data:d}).then(()=>{this.getCart()}).catch(a=>{alert(a.message)})},removeCartItem(e){const o=`${h}/api/${b}/cart/${e}`;u.delete(o).then(()=>{this.getCart()}).catch(d=>{alert(d.message)})},addCouponCode(){const e=`${h}/api/${b}/coupon`;console.log(e);const o={code:this.coupon_code};u.post(e,{data:o}).then(d=>{console.log(d),N.fire(d.data.message),this.getCart()}).catch(d=>{alert(d.data.message)})},getProducts(){const e=`${h}/api/${b}/products`;console.log(e),u.get(e).then(o=>{console.log(o),this.products=o.data.products}).catch(o=>{alert(o.data.message)})}},mounted(){this.getProducts(),this.getCart()},components:{Swiper:E,SwiperSlide:S}},P={class:"container pt-7"},U={class:"mt-3"},j=t("h3",{class:"mt-3 mb-4"},"購物車",-1),I={class:"row"},Q={class:"col-md-8"},A={class:"table"},H=t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"border-0 ps-0"},"品項"),t("th",{scope:"col",class:"border-0"},"數量"),t("th",{scope:"col",class:"border-0"},"金額"),t("th",{scope:"col",class:"border-0"})])],-1),M={key:0},O={scope:"row",class:"border-0 px-0 font-weight-normal py-4 d-flex align-items-center"},J=["src"],F={class:"mb-0 fw-bold ms-3"},W={class:"border-0 align-middle",style:{"max-width":"160px"}},z={class:"input-group pe-5"},G={class:"input-group-prepend"},K=["onClick","disabled"],X=t("i",{class:"fas fa-minus"},null,-1),Y=["onUpdate:modelValue"],Z={class:"input-group-append"},tt=["onClick"],st=t("i",{class:"fas fa-plus"},null,-1),ot={class:"border-0 align-middle"},et={class:"mb-0 ms-auto"},at={class:"border-0 align-middle"},dt=["onClick"],ct=t("i",{class:"fas fa-times"},null,-1),rt={class:"input-group w-50 mb-3"},lt={class:"input-group-append"},nt=t("i",{class:"bi bi-send-fill"},null,-1),it=[nt],pt={class:"col-md-4"},ut={class:"border p-4 mb-4"},_t=t("h4",{class:"fw-bold mb-4"},"訂單明細",-1),ht={class:"table text-muted border-bottom"},bt=t("th",{scope:"row",class:"border-0 px-0 pt-4 font-weight-normal"},"訂單金額",-1),mt={class:"text-end border-0 px-0 pt-4"},ft=t("th",{scope:"row",class:"border-0 px-0 pt-0 pb-4 font-weight-normal"}," 折扣",-1),gt={class:"text-end border-0 px-0 pt-0 pb-4"},xt={class:"d-flex justify-content-between mt-4"},vt=t("p",{class:"mb-0 h4 fw-bold"},"總額",-1),yt={class:"mb-0 h4 fw-bold"},wt={class:"my-5"},Ct=t("h3",{class:"fw-bold"},"其他商品",-1),kt={class:"swiper-container mt-4 mb-5"},Tt={class:"swiper-wrapper"},Nt={class:"swiper-slide"},$t={class:"card border-0 mb-4 position-relative position-relative"},Vt=["src"],Et=t("a",{href:"#",class:"text-dark"},null,-1),St={class:"card-body p-0"},qt={class:"mb-0 mt-3 fw-bold",style:{color:"#4e342e"}},Bt={class:"card-text mb-0 text-primary-emphasis"},Lt={class:"text-muted"},Rt={class:"text-muted"},Dt=t("div",{class:"swiper-slide"},[t("div",{class:"card border-0 mb-4 position-relative position-relative"},[t("img",{src:"https://images.unsplash.com/photo-1490312278390-ab64016e0aa9?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1950&q=80",class:"card-img-top rounded-0",alt:"..."}),t("a",{href:"#",class:"text-dark"}),t("div",{class:"card-body p-0"},[t("h4",{class:"mb-0 mt-3"},[t("a",{href:"#"},"Lorem ipsum")]),t("p",{class:"card-text mb-0"},[i("NT$1,080 "),t("span",{class:"text-muted"},[t("del",null,"NT$1,200")])]),t("p",{class:"text-muted mt-3"})])])],-1),Pt=t("div",{class:"swiper-slide"},[t("div",{class:"card border-0 mb-4 position-relative position-relative"},[t("img",{src:"https://images.unsplash.com/photo-1490312278390-ab64016e0aa9?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1950&q=80",class:"card-img-top rounded-0",alt:"..."}),t("a",{href:"#",class:"text-dark"}),t("div",{class:"card-body p-0"},[t("h4",{class:"mb-0 mt-3"},[t("a",{href:"#"},"Lorem ipsum")]),t("p",{class:"card-text mb-0"},[i("NT$1,080 "),t("span",{class:"text-muted"},[t("del",null,"NT$1,200")])]),t("p",{class:"text-muted mt-3"})])])],-1),Ut=t("div",{class:"swiper-slide"},[t("div",{class:"card border-0 mb-4 position-relative position-relative"},[t("img",{src:"https://images.unsplash.com/photo-1490312278390-ab64016e0aa9?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1950&q=80",class:"card-img-top rounded-0",alt:"..."}),t("a",{href:"#",class:"text-dark"}),t("div",{class:"card-body p-0"},[t("h4",{class:"mb-0 mt-3"},[t("a",{href:"#"},"Lorem ipsum")]),t("p",{class:"card-text mb-0"},[i("NT$1,080 "),t("span",{class:"text-muted"},[t("del",null,"NT$1,200")])]),t("p",{class:"text-muted mt-3"})])])],-1);function jt(e,o,d,g,a,p){const v=x("RouterLink"),m=x("swiper-slide"),T=x("swiper");return n(),_("div",P,[t("div",U,[j,t("div",I,[t("div",Q,[t("table",A,[H,a.carts.carts?(n(),_("tbody",M,[(n(!0),_(y,null,w(a.carts.carts,s=>(n(),_("tr",{class:"border-bottom border-top",key:s.id},[t("th",O,[t("img",{src:s.product.imageUrl,alt:"",style:{width:"72px",height:"72px","object-fit":"cover"}},null,8,J),t("p",F,c(s.product.title),1)]),t("td",W,[t("div",z,[t("div",G,[t("button",{class:"btn btn-outline-dark border-0 py-2",type:"button",id:"button-addon1",onClick:f=>{s.qty--,p.changeCartQty(s,s.qty)},disabled:s.qty===1},[i("- "),X],8,K)]),C(t("input",{type:"number",class:"form-control border-0 text-center my-auto shadow-none",placeholder:"","aria-label":"Example text with button addon","aria-describedby":"button-addon1",min:"1","onUpdate:modelValue":f=>s.qty=f,readonly:""},null,8,Y),[[k,s.qty]]),t("div",Z,[t("button",{class:"btn btn-outline-dark border-0 py-2",type:"button",id:"button-addon2",onClick:f=>{s.qty++,p.changeCartQty(s,s.qty)}},[i("+ "),st],8,tt)])])]),t("td",ot,[t("p",et," NT$"+c(s.total),1)]),t("td",at,[t("button",{class:"btn btn-outline-dark border-0 py-2",type:"button",id:"button-addon1",onClick:f=>p.removeCartItem(s.id)},"x ",8,dt),ct])]))),128))])):B("",!0)]),t("div",rt,[C(t("input",{type:"text",class:"form-control rounded-0 border-bottom border-top-0 border-start-0 border-end-0 shadow-none",placeholder:"優惠碼","aria-label":"Recipient's username","aria-describedby":"button-addon2","onUpdate:modelValue":o[0]||(o[0]=s=>a.coupon_code=s)},null,512),[[k,a.coupon_code]]),t("div",lt,[t("button",{class:"btn btn-outline-dark border-bottom border-top-0 border-start-0 border-end-0 rounded-0",type:"button",id:"button-addon2",onClick:o[1]||(o[1]=(...s)=>p.addCouponCode&&p.addCouponCode(...s))},it)])])]),t("div",pt,[t("div",ut,[_t,t("table",ht,[t("tbody",null,[t("tr",null,[bt,t("td",mt,"NT$"+c(a.carts.total),1)]),t("tr",null,[ft,t("td",gt,c(a.carts.final_total-a.carts.total),1)])])]),t("div",xt,[vt,t("p",yt,"NT$"+c(a.carts.final_total),1)]),l(v,{class:"btn btn-dark w-100 mt-4",to:"/checkout",style:{"background-color":"#7FA185"}},{default:r(()=>[i(" 去買單")]),_:1})])])]),t("div",wt,[Ct,t("div",kt,[t("div",Tt,[l(T,{ref:"{swiperRef}",slidesPerView:3,centeredSlides:!0,spaceBetween:30,pagination:{type:"fraction"},navigation:!0,modules:g.modules},{default:r(()=>[(n(!0),_(y,null,w(a.products,s=>(n(),L(m,{key:s.id},{default:r(()=>[t("div",Nt,[t("div",$t,[l(v,{class:"text-decoration-none",to:`/product/${s.id}`},{default:r(()=>[t("img",{src:s.imageUrl,class:"card-img-top rounded-0"},null,8,Vt),Et,t("div",St,[t("h4",qt,c(s.title),1),t("p",Bt,"NT$"+c(s.price),1),t("p",Lt,[t("span",Rt,[t("del",null,"NT$"+c(s.origin_price),1)])])])]),_:2},1032,["to"])])])]),_:2},1024))),128)),l(m,null,{default:r(()=>[Dt]),_:1}),l(m,null,{default:r(()=>[Pt]),_:1}),l(m,null,{default:r(()=>[Ut]),_:1})]),_:1},8,["modules"])])])])])])}const Ot=q(D,[["render",jt]]);export{Ot as default};
